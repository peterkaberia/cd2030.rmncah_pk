<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add Outlier Flags Based on 5-MAD Bounds — add_outlier5std_column • cd2030.rmncah</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add Outlier Flags Based on 5-MAD Bounds — add_outlier5std_column"><meta name="description" content="add_outlier5std_column calculates and appends outlier flags for specified
indicators in a dataset. An outlier is defined as a value falling outside the
range defined by the median ± 5 times the Median Absolute Deviation (MAD).
This method is applied on a per-group basis, allowing flexibility for grouping
by columns like district."><meta property="og:description" content="add_outlier5std_column calculates and appends outlier flags for specified
indicators in a dataset. An outlier is defined as a value falling outside the
range defined by the median ± 5 times the Median Absolute Deviation (MAD).
This method is applied on a per-group basis, allowing flexibility for grouping
by columns like district."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cd2030.rmncah</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/aphrcwaro/cd2030.rmncah/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add Outlier Flags Based on 5-MAD Bounds</h1>
      <small class="dont-index">Source: <a href="https://github.com/aphrcwaro/cd2030.rmncah/blob/main/R/utils-quality_checks.R" class="external-link"><code>R/utils-quality_checks.R</code></a></small>
      <div class="d-none name"><code>add_outlier5std_column.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>add_outlier5std_column</code> calculates and appends outlier flags for specified
indicators in a dataset. An outlier is defined as a value falling outside the
range defined by the median ± 5 times the Median Absolute Deviation (MAD).
This method is applied on a per-group basis, allowing flexibility for grouping
by columns like <code>district</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_outlier5std_column</span><span class="op">(</span><span class="va">.data</span>, <span class="va">indicators</span>, group_by <span class="op">=</span> <span class="st">"district"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>A <code>cd_data</code> tibble containing health indicator data.</p></dd>


<dt id="arg-indicators">indicators<a class="anchor" aria-label="anchor" href="#arg-indicators"></a></dt>
<dd><p>A character vector specifying the names of the indicator
columns to analyze for outliers.</p></dd>


<dt id="arg-group-by">group_by<a class="anchor" aria-label="anchor" href="#arg-group-by"></a></dt>
<dd><p>A character string or vector specifying the column(s) to group
by when calculating the median and MAD (default is <code>'district'</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A tibble with additional columns for each indicator, named
<code>{indicator}_outlier5std</code>, containing a value of <code>1</code> if the observation is
an outlier and <code>0</code> otherwise.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<ul><li><p><strong>Median and MAD Calculation</strong>:
For each indicator, the median and MAD are calculated using data from years
prior to the most recent year in the dataset.
The last year is excluded to prevent potential contamination of the baseline
statistics.</p></li>
<li><p><strong>Outlier Definition</strong>:
A value is flagged as an outlier if it falls outside the range:
Lower Bound = median - 5 * MAD
Lower Bound = median + 5 * MAD</p></li>
<li><p><strong>Grouping</strong>:
Calculations are performed separately for each group specified by the
<code>group_by</code> parameter.</p></li>
<li><p><strong>Generated Columns</strong>:
For each indicator, the function generates an outlier flag column named
<code>{indicator}_outlier5std</code>. The column contains <code>1</code> if the value is an outlier
and <code>0</code> otherwise.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="add_mad_med_columns.html">add_mad_med_columns()</a></code> for computing and appending the median and MAD columns.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Add missing value flags for all indicators</span></span></span>
<span class="r-in"><span><span class="fu">add_outlier5std_column</span><span class="op">(</span><span class="va">data</span>,</span></span>
<span class="r-in"><span>  indicators <span class="op">=</span> <span class="st">"indicator1"</span>,</span></span>
<span class="r-in"><span>  group_by <span class="op">=</span> <span class="st">"district"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Kariuki, Martin Mutua, Peter Kaberia, Godfrey Adero, Rornald Muhumuza, African Population and Health Research Center (APHRC).</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

